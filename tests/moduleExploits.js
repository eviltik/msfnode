#!/usr/bin/env node
var assert = require('assert');
var metasploitClient = require('../metasploitJSClient');


var onConnect = function(err,token) {
    if (err) {
        console.log(err.error_message);
        process.exit(0);
    }
    fetchModuleExploits();
}

var fetchModuleExploits = function() {
    client.exec(['module.exploits'],function(err,r) {

        if (err) return console.log('Error: '+err);
        assert.notEqual(r.modules,null);

    });
}


var client = new metasploitClient({
    login:'myLogin',
    password:'myPassword',
    host:'localhost',   // optional
    port:55553,         // optional
    protocol:'https',   // optional
    apiVersion:'1.0',   // optional
    apiPath:'/api/'     // optional
});

client.on('connected',onConnect);

